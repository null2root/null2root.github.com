<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"> <meta name=viewport content="width=device-width, initial-scale=1"> <meta name=description content="Underground hacker group"> <meta name=author content="NULL@ROOT"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>[번역] Pwn2Own 2017: UAF in JSC::CachedCall | NULL@ROOT</title> <meta name="generator" content="Jekyll v3.10.0" /> <meta property="og:title" content="[번역] Pwn2Own 2017: UAF in JSC::CachedCall" /> <meta name="author" content="null2root" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="출처 : https://phoenhex.re/2017-05-04/pwn2own17-cachedcall-uaf 번역 및 보완 : LiLi, y0ny0ns0n, powerprove, cheese @ null2root" /> <meta property="og:description" content="출처 : https://phoenhex.re/2017-05-04/pwn2own17-cachedcall-uaf 번역 및 보완 : LiLi, y0ny0ns0n, powerprove, cheese @ null2root" /> <link rel="canonical" href="http://localhost:4000/blog/2019/04/07/Pwn2Own-2017-cachedcall-kor.html" /> <meta property="og:url" content="http://localhost:4000/blog/2019/04/07/Pwn2Own-2017-cachedcall-kor.html" /> <meta property="og:site_name" content="NULL@ROOT" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2019-04-07T00:24:00+09:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="[번역] Pwn2Own 2017: UAF in JSC::CachedCall" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"null2root"},"dateModified":"2019-04-07T00:24:00+09:00","datePublished":"2019-04-07T00:24:00+09:00","description":"출처 : https://phoenhex.re/2017-05-04/pwn2own17-cachedcall-uaf 번역 및 보완 : LiLi, y0ny0ns0n, powerprove, cheese @ null2root","headline":"[번역] Pwn2Own 2017: UAF in JSC::CachedCall","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/blog/2019/04/07/Pwn2Own-2017-cachedcall-kor.html"},"url":"http://localhost:4000/blog/2019/04/07/Pwn2Own-2017-cachedcall-kor.html"}</script> <!-- End Jekyll SEO tag --> <link rel="apple-touch-icon-precomposed" sizes="57x57" href="http://localhost:4000/assets/images/favicon/apple-touch-icon-57x57.png" /> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/assets/images/favicon/apple-touch-icon-114x114.png" /> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/assets/images/favicon/apple-touch-icon-72x72.png" /> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/assets/images/favicon/apple-touch-icon-144x144.png" /> <link rel="apple-touch-icon-precomposed" sizes="60x60" href="http://localhost:4000/assets/images/favicon/apple-touch-icon-60x60.png" /> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="http://localhost:4000/assets/images/favicon/apple-touch-icon-120x120.png" /> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="http://localhost:4000/assets/images/favicon/apple-touch-icon-76x76.png" /> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="http://localhost:4000/assets/images/favicon/apple-touch-icon-152x152.png" /> <link rel="icon" type="image/png" href="http://localhost:4000/assets/images/favicon/favicon-196x196.png" sizes="196x196" /> <link rel="icon" type="image/png" href="http://localhost:4000/assets/images/favicon/favicon-96x96.png" sizes="96x96" /> <link rel="icon" type="image/png" href="http://localhost:4000/assets/images/favicon/favicon-32x32.png" sizes="32x32" /> <link rel="icon" type="image/png" href="http://localhost:4000/assets/images/favicon/favicon-16x16.png" sizes="16x16" /> <link rel="icon" type="image/png" href="http://localhost:4000/assets/images/favicon/favicon-128.png" sizes="128x128" /> <meta name="application-name" content="&nbsp;"/> <meta name="msapplication-TileColor" content="#FFFFFF" /> <meta name="msapplication-TileImage" content="mstile-144x144.png" /> <meta name="msapplication-square70x70logo" content="mstile-70x70.png" /> <meta name="msapplication-square150x150logo" content="mstile-150x150.png" /> <meta name="msapplication-wide310x150logo" content="mstile-310x150.png" /> <meta name="msapplication-square310x310logo" content="mstile-310x310.png" /> <link rel="canonical" href="http://localhost:4000/blog/2019/04/07/Pwn2Own-2017-cachedcall-kor.html"> <link rel="alternate" type="application/rss+xml" title="" href="http://localhost:4000/feed.xml" /> <style> @charset "UTF-8"; /*! normalize.css v4.1.1 | MIT License | github.com/necolas/normalize.css */ /** * 1. Change the default font family in all browsers (opinionated). * 2. Prevent adjustments of font size after orientation changes in IE and iOS. */ html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ } /** * Remove the margin: in all browsers (opinionated). */ body { margin: 0; } /* HTML5 display: definitions ========================================================================== */ /** * Add the correct display: in IE 9-. * 1. Add the correct display: in Edge, IE, and Firefox. * 2. Add the correct display: in IE. */ article, aside, details, figcaption, figure, footer, header, main, menu, nav, section, summary { /* 1 */ display: block; } /** * Add the correct display: in IE 9-. */ audio, canvas, progress, video { display: inline-block; } /** * Add the correct display: in iOS 4-7. */ audio:not([controls]) { display: none; height: 0; } /** * Add the correct vertical alignment in Chrome, Firefox, and Opera. */ progress { vertical-align: baseline; } /** * Add the correct display: in IE 10-. * 1. Add the correct display: in IE. */ template, [hidden] { display: none; } /* Links ========================================================================== */ /** * 1. Remove the gray background: on active links in IE 10. * 2. Remove gaps in links underline in iOS 8+ and Safari 8+. */ a { background-color: transparent; /* 1 */ -webkit-text-decoration-skip: objects; /* 2 */ } /** * Remove the outline on focused links when they are also active or hovered * in all browsers (opinionated). */ a:active, a:hover { outline-width: 0; } /* Text-level semantics ========================================================================== */ /** * 1. Remove the bottom border: in Firefox 39-. * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari. */ abbr[title] { border-bottom: none; /* 1 */ text-decoration: underline; /* 2 */ text-decoration: underline dotted; /* 2 */ } /** * Prevent the duplicate application of `bolder` by the next rule in Safari 6. */ b, strong { font-weight: inherit; } /** * Add the correct font weight in Chrome, Edge, and Safari. */ b, strong { font-weight: bolder; } /** * Add the correct font style in Android 4.3-. */ dfn { font-style: italic; } /** * Correct the font size and margin: on `h1` elements within `section` and * `article` contexts in Chrome, Firefox, and Safari. */ h1 { font-size: 2em; margin: 0.67em 0; } /** * Add the correct background: and color: in IE 9-. */ mark { background-color: #ff0; color: #000; } /** * Add the correct font size in all browsers. */ small { font-size: 80%; } /** * Prevent `sub` and `sup` elements from affecting the line height: in * all browsers. */ sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; } sub { bottom: -0.25em; } sup { top: -0.5em; } /* Embedded content ========================================================================== */ /** * Remove the border: on images inside links in IE 10-. */ img { border-style: none; } /** * Hide the overflow in IE. */ svg:not(:root) { overflow: hidden; } /* Grouping content ========================================================================== */ /** * 1. Correct the inheritance and scaling of font size in all browsers. * 2. Correct the odd `em` font sizing in all browsers. */ code, kbd, pre, samp { font-family: monospace, monospace; /* 1 */ font-size: 1em; /* 2 */ } /** * Add the correct margin: in IE 8. */ figure { margin: 1em 40px; } /** * 1. Add the correct box sizing in Firefox. * 2. Show the overflow in Edge and IE. */ hr { box-sizing: content-box; /* 1 */ height: 0; /* 1 */ overflow: visible; /* 2 */ } /* Forms ========================================================================== */ /** * 1. Change font properties to `inherit` in all browsers (opinionated). * 2. Remove the margin: in Firefox and Safari. */ button, input, select, textarea { font: inherit; /* 1 */ margin: 0; /* 2 */ } /** * Restore the font weight unset by the previous rule. */ optgroup { font-weight: bold; } /** * Show the overflow in IE. * 1. Show the overflow in Edge. */ button, input { /* 1 */ overflow: visible; } /** * Remove the inheritance of text transform in Edge, Firefox, and IE. * 1. Remove the inheritance of text transform in Firefox. */ button, select { /* 1 */ text-transform: none; } /** * 1. Prevent a WebKit bug where (2) destroys native `audio` and `video` * controls in Android 4. * 2. Correct the inability to style clickable types in iOS and Safari. */ button, html [type="button"], [type="reset"], [type="submit"] { -webkit-appearance: button; /* 2 */ } /** * Remove the inner border: and padding: in Firefox. */ button::-moz-focus-inner, [type="button"]::-moz-focus-inner, [type="reset"]::-moz-focus-inner, [type="submit"]::-moz-focus-inner { border-style: none; padding: 0; } /** * Restore the focus styles unset by the previous rule. */ button:-moz-focusring, [type="button"]:-moz-focusring, [type="reset"]:-moz-focusring, [type="submit"]:-moz-focusring { outline: 1px dotted ButtonText; } /** * Change the border, margin, and padding: in all browsers (opinionated). */ fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; } /** * 1. Correct the text wrapping in Edge and IE. * 2. Correct the color: inheritance from `fieldset` elements in IE. * 3. Remove the padding: so developers are not caught out when they zero out * `fieldset` elements in all browsers. */ legend { box-sizing: border-box; /* 1 */ color: inherit; /* 2 */ display: table; /* 1 */ max-width: 100%; /* 1 */ padding: 0; /* 3 */ white-space: normal; /* 1 */ } /** * Remove the default vertical scrollbar in IE. */ textarea { overflow: auto; } /** * 1. Add the correct box sizing in IE 10-. * 2. Remove the padding: in IE 10-. */ [type="checkbox"], [type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ } /** * Correct the cursor style of increment and decrement buttons in Chrome. */ [type="number"]::-webkit-inner-spin-button, [type="number"]::-webkit-outer-spin-button { height: auto; } /** * 1. Correct the odd appearance in Chrome and Safari. * 2. Correct the outline style in Safari. */ [type="search"] { -webkit-appearance: textfield; /* 1 */ outline-offset: -2px; /* 2 */ } /** * Remove the inner padding: and cancel buttons in Chrome and Safari on OS X. */ [type="search"]::-webkit-search-cancel-button, [type="search"]::-webkit-search-decoration { -webkit-appearance: none; } /** * Correct the text style of placeholders in Chrome, Edge, and Safari. */ ::-webkit-input-placeholder { color: inherit; opacity: 0.54; } /** * 1. Correct the inability to style clickable types in iOS and Safari. * 2. Change font properties to `inherit` in Safari. */ ::-webkit-file-upload-button { -webkit-appearance: button; /* 1 */ font: inherit; /* 2 */ } /* GitHub style for Pygments syntax highlighter, for use with Jekyll * Courtesy of GitHub.com */ .highlight .c { color: #999988; font-style: italic; } .highlight .err { color: #a61717; background-color: #e3d2d2; } .highlight .k { font-weight: bold; } .highlight .o { font-weight: bold; } .highlight .cm { color: #999988; font-style: italic; } .highlight .cp { color: #999999; font-weight: bold; } .highlight .c1 { color: #999988; font-style: italic; } .highlight .cs { color: #999999; font-weight: bold; font-style: italic; } .highlight .gd { color: #000000; background-color: #ffdddd; } .highlight .gd .x { color: #000000; background-color: #ffaaaa; } .highlight .ge { font-style: italic; } .highlight .gr { color: #aa0000; } .highlight .gh { color: #999999; } .highlight .gi { color: #000000; background-color: #ddffdd; } .highlight .gi .x { color: #000000; background-color: #aaffaa; } .highlight .go { color: #888888; } .highlight .gp { color: #555555; } .highlight .gs { font-weight: bold; } .highlight .gu { color: #800080; font-weight: bold; } .highlight .gt { color: #aa0000; } .highlight .kc { font-weight: bold; } .highlight .kd { font-weight: bold; } .highlight .kn { font-weight: bold; } .highlight .kp { font-weight: bold; } .highlight .kr { font-weight: bold; } .highlight .kt { color: #445588; font-weight: bold; } .highlight .m { color: #009999; } .highlight .s { color: #dd1144; } .highlight .n { color: #333333; } .highlight .na { color: teal; } .highlight .nb { color: #0086b3; } .highlight .nc { color: #445588; font-weight: bold; } .highlight .no { color: teal; } .highlight .ni { color: purple; } .highlight .ne { color: #990000; font-weight: bold; } .highlight .nf { color: #990000; font-weight: bold; } .highlight .nn { color: #555555; } .highlight .nt { color: navy; } .highlight .nv { color: teal; } .highlight .ow { font-weight: bold; } .highlight .w { color: #bbbbbb; } .highlight .mf { color: #009999; } .highlight .mh { color: #009999; } .highlight .mi { color: #009999; } .highlight .mo { color: #009999; } .highlight .sb { color: #dd1144; } .highlight .sc { color: #dd1144; } .highlight .sd { color: #dd1144; } .highlight .s2 { color: #dd1144; } .highlight .se { color: #dd1144; } .highlight .sh { color: #dd1144; } .highlight .si { color: #dd1144; } .highlight .sx { color: #dd1144; } .highlight .sr { color: #009926; } .highlight .s1 { color: #dd1144; } .highlight .ss { color: #990073; } .highlight .bp { color: #999999; } .highlight .vc { color: teal; } .highlight .vg { color: teal; } .highlight .vi { color: teal; } .highlight .il { color: #009999; } .highlight .gc { color: #999; background-color: #EAF2F5; } body, html { font-size: 62.5%; } body { line-height: 1; font: 16px "Helvetica Neue", Helvetica, Arial, sans-serif; color: #666; } h1, h2, h3, h4 { font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; color: #222; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; } h1 { font-size: 3rem; letter-spacing: -1px; color: #222; font-weight: 700; } h2 { font-size: 2.2rem; } h3 { font-size: 2rem; } h4 { font-size: 1.6rem; } a { color: #4b0082; text-decoration: underline; } p { line-height: 1.7; color: #666; font-weight: 300; margin-bottom: 20px; letter-spacing: 0.4px; } @media only screen and (max-width: 400px) { p { letter-spacing: 0.2px; } } strong { font-weight: 400; color: #000; } ul li, ol li { line-height: 2.4rem; font-weight: 300; color: #666; } img, pre, iframe { max-width: 100%; } img, pre { border-radius: 4px; } figcaption { position: relative; top: -20px; left: 0; right: 0; margin: 0 auto; width: 100%; text-align: center; font-size: 1.3rem; color: #aaa; font-weight: 300; } @media only screen and (max-width: 400px) { figcaption { font-size: 1.2rem; } } blockquote { padding-left: 15px; border-left: 3px solid #eee; } hr { border: none; height: 1px; margin: 40px auto; background: #eee; width: 100%; } figure.highlight { width: 100%; margin: 0; } code, tt { padding: 1px 0; font-family: "Consolas", Liberation Mono, Menlo, Courier, monospace; font-size: 12px; line-height: 20px; background: #fff; border-radius: 2px; border-radius: 2px; } pre { box-sizing: border-box; margin: 0 0 1.75em 0; width: 100%; padding: 5px 10px; font-family: "Consolas", Liberation Mono, Menlo, Courier, monospace; font-size: 1.2rem; line-height: 2rem; overflow: auto; background: #fff; border: 1px solid #ededed; border-radius: 2px; } .wrapper-normal, .wrapper-large { height: 100%; width: 96%; margin: 0 auto; } @media only screen and (max-width: 400px) { .wrapper-normal, .wrapper-large { width: 88%; } } @media only screen and (min-width: 400px) and (max-width: 1050px) { .wrapper-normal, .wrapper-large { width: 88%; } } .wrapper-normal { max-width: 810px; } .wrapper-large { max-width: 1024px; } /* general helpers */ .text-center { text-align: center; } .clearfix:before, .clearfix:after { content: ""; display: table; } .clearfix:after { clear: both; } /* animations */ .animated { animation: fade-in-down 0.6s; animation-delay: 0.3s; animation-fill-mode: both; } @keyframes fade-in-down { 0% { opacity: 0; transform: translateY(-10px); } 100% { opacity: 1; transform: translateY(0); } } .home, .blog, .projects { margin-top: 125px; } .home > .list, .blog > .list, .projects > .list { border-top: 1px solid #ededed; margin-top: 30px; padding-top: 40px; position: relative; } .home > .list:before, .blog > .list:before, .projects > .list:before { display: block; content: " "; width: 7px; height: 7px; border: #ededed 1px solid; position: absolute; top: -5px; left: 50%; margin-left: -5px; background: #FFF; box-shadow: #FFF 0 0 0 5px; border-radius: 3px; } .home > .list > .item, .blog > .list > .item, .projects > .list > .item { display: block; width: 95%; margin: 0 auto; } .home > .list > .item > .url, .blog > .list > .item > .url, .projects > .list > .item > .url { width: 100%; display: block; padding: 20px 0; text-decoration: none; } .home > .list > .item > .url > .title, .blog > .list > .item > .url > .title, .projects > .list > .item > .url > .title { margin: 0; width: 75%; font-weight: 500; transition: all ease-in-out 0.2s; } .home > .list > .item:hover > .url > .title, .blog > .list > .item:hover > .url > .title, .projects > .list > .item:hover > .url > .title { color: #4b0082; } .home > .list aside, .blog > .list aside, .projects > .list aside { position: relative; top: 2px; margin: 0; width: 25%; float: right; font-weight: 300; color: #aaa; text-align: right; transition: all ease-in-out 0.2s; } .home > .list .item:hover .url aside, .blog > .list .item:hover .url aside, .projects > .list .item:hover .url aside { color: #666; } .blog > .list > .item > .url > .title, .projects > .list > .item > .url > .title { display: inline; } .blog > .list > .item > .url > .emoji, .projects > .list > .item > .url > .emoji { display: inline; position: relative; top: -4px; margin-right: 10px; } .page { margin-top: 125px; } .page > h1 { text-align: center; margin-bottom: 6rem; } .about img { width: 50%; margin: 0 auto; display: block; } .post { margin-top: 125px; } .post > .title { text-align: center; margin-bottom: 3rem; } .post > .date, .post > .post-tags { color: #aaa; font-weight: 300; font-size: 1.4rem; text-transform: uppercase; text-align: center; display: block; margin-bottom: 6rem; letter-spacing: 1px; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; } .post > .date { margin-bottom: 2rem; } .post > .post-tags > .item { padding: 2px 8px; border-radius: 3px; font-size: 1.1rem; background: #ededed; color: #666; letter-spacing: 1px; margin: 3px 1px; text-decoration: none; display: inline-block; } .post > h2, .post > h3, .post > h4 { margin-top: 40px; } .post > h2 a, .post > h3 a, .post > h4 a { text-decoration: none; } .post > .title-image { max-height: 360px; display: block; margin: 0 auto; } .post > .blog-navigation { font-size: 1.4rem; display: block; width: auto; overflow: hidden; } .post > .blog-navigation a { display: block; width: 50%; float: left; margin: 1em 0; } .post > .blog-navigation .next { text-align: right; } .tags { margin-top: 125px; } .tags > .list { border-top: 1px solid #ededed; margin-top: 30px; padding-top: 40px; position: relative; } .tags > .list:before { display: block; content: " "; width: 7px; height: 7px; border: #ededed 1px solid; position: absolute; top: -5px; left: 50%; margin-left: -5px; background: #FFF; box-shadow: #FFF 0 0 0 5px; border-radius: 3px; } .tags > .list > .item { font-weight: 300; text-transform: uppercase; text-align: center; margin-bottom: 6rem; -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility; padding: 3px 9px; border-radius: 3px; font-size: 1.3rem; background: #ededed; color: #666; letter-spacing: 1px; margin: 0 0.5rem 1rem; text-decoration: none; display: inline-block; } .tag-list > .list { padding: 0; } .tag-list > .list > .item { display: block; width: 80%; margin: 0 10%; } .tag-list > .list > .item > .url { width: 100%; height: 100%; display: block; padding: 20px 0; text-decoration: none; } .tag-list > .list > .item > .url > .title { margin: 0; width: 75%; font-weight: 400; transition: all ease-in-out 0.2s; font-size: 1.6rem; } .tag-list > .list > .item:hover > .url > .title { color: #4b0082; } .tag-list > .list aside { position: relative; top: 2px; margin: 0; width: 25%; float: right; font-weight: 300; color: #aaa; text-align: right; transition: all ease-in-out 0.2s; font-size: 1.6rem; } .tag-list > .list .item:hover .url aside { color: #666; } .author { padding: 3rem 0; border-bottom: 1px solid #ededed; border-top: 1px solid #ededed; max-width: 100%; margin: 4rem auto 0; } .author > .toleft > .selfie { width: 90%; border-radius: 100%; } .author > .toright > .name, .author > .toright > .bio { width: 60%; display: inline-block; } .author > .toright > .name { font-size: 1.5rem; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: 500; margin: 6px 0 0; } @media only screen and (max-width: 400px) { .author > .toright > .name { width: 100%; display: block; } } @media only screen and (min-width: 400px) and (max-width: 1050px) { .author > .toright > .name { width: 100%; display: block; } } .author > .toright > .bio { font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; font-weight: 300; color: #aaa; font-size: 1.3rem; text-align: justify; line-height: 1.5; margin: 0; } @media only screen and (max-width: 400px) { .author > .toright > .bio { width: 100%; display: block; } } @media only screen and (min-width: 400px) and (max-width: 1050px) { .author > .toright > .bio { width: 100%; display: block; } } .author > .toleft { width: 10%; display: inline-block; } @media only screen and (max-width: 400px) { .author > .toleft { width: 20%; } } @media only screen and (min-width: 400px) and (max-width: 1050px) { .author > .toleft { width: 20%; } } .author > .toright { width: 89%; display: inline-block; vertical-align: top; } @media only screen and (max-width: 400px) { .author > .toright { width: 78%; } } @media only screen and (min-width: 400px) and (max-width: 1050px) { .author > .toright { width: 78%; } } .no-disqus { border-bottom: none; padding-bottom: 0; } .disqus { margin: 0 auto; max-width: 100%; padding: 40px 0; } .footer-main { border-top: 1px solid #ededed; padding: 40px 0; margin: 40px 0 0; font-size: 1.3rem; color: #aaa; font-weight: 300; text-align: center; position: relative; } .footer-main:before { display: block; content: " "; width: 7px; height: 7px; border: #ededed 1px solid; position: absolute; top: -5px; left: 50%; margin-left: -5px; background: #FFF; box-shadow: #FFF 0 0 0 5px; border-radius: 3px; } .footer-main > .link { display: inline; } .footer-main > .link > .icon { width: 15px !important; fill: #aaa !important; transition: ease-in-out all 0.3s; position: relative; top: 3px; display: inherit; margin: 0; } .footer-main > .link > .icon:hover { fill: #4b0082 !important; } .footer-main > .extra { color: #aaa; margin-top: 0; } .footer-main > .extra > .link { color: #222; text-decoration: none; border-bottom: 1px solid transparent; transition: ease-in-out all 0.3s; padding-bottom: 1px; } .footer-main > .extra > .link:hover { border-color: #aaa; } .header-home { display: block; margin: 0 auto; text-align: center; position: relative; z-index: 99; } .header-home > .link > .selfie { width: 125px; margin-bottom: 25px; border-radius: 100%; transition: all 0.2s; box-shadow: 0; opacity: 1; } .header-home > .link > .selfie:hover { box-shadow: 0 0px 4px 0 rgba(0, 0, 0, 0.18), 0 0px 12px 0 rgba(0, 0, 0, 0.15); opacity: 0.8; } .header-home > .title { font-size: 4rem; margin: 0 0 13px; } .header-home > .description { font-size: 1.85rem; font-weight: 300; font-style: normal; color: #aaa; width: 70%; margin: 0 auto 30px; } .header-home > .description a { font-weight: 200; } .nav > .list, .nav-home > .list { list-style: none; margin: 0; padding: 0 13px 0; } .nav > .list > .item, .nav-home > .list > .item { display: inline-block; } .nav > .list > .item > .link, .nav-home > .list > .item > .link { display: inline-block; font-weight: 300; font-size: 1.4rem; padding: 20px 10px; text-decoration: none; } .nav { position: absolute; right: 0; top: 0; } .nav > .list { padding: 0 13px 0; } .nav > .list > .item > .link { font-size: 1.4rem; padding: 20px 10px; } .nav-home { margin-top: 40px; text-align: center; } .nav-home > .list { padding: 0; } .nav-home > .list > .item > .link { font-size: 2rem; padding: 7px 15px; margin: 0; border-radius: 4%; transition: all 0.4s ease-in-out; width: 70px; } .nav-home > .list > .item > .link:hover { color: #666; } .evidence { background-image: linear-gradient(to bottom, rgba(39, 243, 106, 0.15), rgba(39, 243, 106, 0.15)); color: beta; } .star > .url > .title { width: auto !important; display: inline; background-image: linear-gradient(rgba(39, 243, 106, 0.15), rgba(39, 243, 106, 0.15)); } .twitter-tweet { margin: 10px auto; } .icon { display: inline-block; width: 17px; height: 17px; fill: #000; text-align: center; color: #000; margin: 7px auto; } .caption { position: relative; top: 1rem; left: 0; right: 0; margin: 0 auto; width: 100%; text-align: center; font-size: 1.3rem; } .bigger-image { min-width: 130%; margin: 5rem 0 5rem -15%; } @media only screen and (max-width: 400px) { .bigger-image { min-width: 114%; margin: 2rem 0 2rem -7%; } } @media only screen and (min-width: 400px) and (max-width: 1050px) { .bigger-image { min-width: 114%; margin: 2rem 0 2rem -7%; } } .breaker { height: 1px; margin: 6rem auto; width: 100%; } .breaker:before { content: "• • •"; width: 100%; text-align: center; display: block; color: #aaa; letter-spacing: 4px; position: relative; top: -8px; } .pagination { width: 95%; margin: 3rem auto 0; text-align: center; } .pagination > .page_number { display: inline-block; font-size: 1.3rem; } .pagination > .previous, .pagination > .next { display: inline-block; font-size: 1.8rem; position: relative; top: 1px; padding: 1px 9px; } .pagination > .hidden { visibility: hidden; } .related { margin: 10rem 0 0rem; } .share { float: right; width: 40%; display: inline; text-align: right; position: relative; top: -10px; } @media only screen and (max-width: 400px) { .share { width: 100%; display: block; top: 0; text-align: left; float: none; margin-top: 5px; } } @media only screen and (min-width: 400px) and (max-width: 1050px) { .share { width: 100%; display: block; top: 0; text-align: left; float: none; margin-top: 5px; } } .share > .twitter, .share > .facebook, .share > .google-plus, .share > .linkedin, .share > .reddit { display: inline; vertical-align: middle; font-size: 13px; font-weight: 700; color: #fff; padding: 6px 10px; border-radius: 3px; margin-left: 5px; text-decoration: none; } @media only screen and (max-width: 400px) { .share > .twitter, .share > .facebook, .share > .google-plus, .share > .linkedin, .share > .reddit { margin: 0 5px 10px 0; } } @media only screen and (min-width: 400px) and (max-width: 1050px) { .share > .twitter, .share > .facebook, .share > .google-plus, .share > .linkedin, .share > .reddit { margin: 0 5px 10px 0; } } .share > .twitter { background: #4fafed; } .share > .facebook { background: #4361b3; } .share > .google-plus { background: #dd4b39; } .share > .linkedin { background: #0077b5; } .share > .reddit { background: #ff4500; } .share svg { fill: #fff; position: relative; top: 3px; margin: 0; margin-right: 4px; display: inherit; } @media only screen and (min-width: 780px) { .side-by-side { width: 130%; margin: 6rem 0 6rem -15%; } } @media only screen and (max-width: 780px) { .side-by-side { width: 100%; margin: 4rem 0; } } .side-by-side > .toleft, .side-by-side > .toright { display: inline-block; width: 47.5%; } @media only screen and (max-width: 780px) { .side-by-side > .toleft img, .side-by-side > .toright img { text-align: center; display: block; margin: 0 auto; } } @media only screen and (min-width: 780px) { .side-by-side > .toleft { margin-right: 2%; } } @media only screen and (max-width: 780px) { .side-by-side > .toleft { width: 100%; margin: 0 0 4rem 0; } } @media only screen and (min-width: 780px) { .side-by-side > .toright { margin-left: 2%; vertical-align: top; } } @media only screen and (max-width: 780px) { .side-by-side > .toright { width: 100%; margin: 0 0 4rem 0; } } .side-by-side > .toleft > p, .side-by-side > .toright > p { margin: 0 0 4rem 0; } @media only screen and (max-width: 780px) { .side-by-side > .toleft > p, .side-by-side > .toright > p { margin: 0; } } .social-links { margin-top: 20px; } .social-links > .link { margin: 0; text-decoration: none; position: relative; display: inline-block; height: 35px; width: 35px; } .social-links > .link:hover > .icon { fill: #4b0082; } .social-links > .link:hover:before { opacity: 1; display: inline-block; transform: translate3d(0, 0, 0); white-space: nowrap; } .social-links > .link:before { content: attr(data-title); display: none; position: absolute; bottom: -34px; left: -6px; margin: 0 auto; font-size: 13px; padding: 3px 10px; background: #222; color: #fff; border-radius: 2px; height: 22px; line-height: 22px; opacity: 0; transition: opacity 150ms linear, transform 150ms linear, -webkit-transform 150ms linear; transform: translate3d(0, -8px, 0); z-index: 99; } .social-links > .link:after { content: ""; position: absolute; top: 35px; left: 13px; width: 0; height: 0; border-left: 5px solid transparent; border-right: 5px solid transparent; border-bottom: 6px solid #222; opacity: 0; transition: opacity 150ms linear, transform 150ms linear, -webkit-transform 150ms linear; transform: translate3d(0, -8px, 0); z-index: 100; } .social-links > .link:hover:after { opacity: 1; transform: translate3d(0, 0, 0); } .social-links > .icon { transition: all ease-in-out 0.2s; } .spoiler { position: relative; } .spoiler:before { content: ""; background-color: #fafae0; position: absolute; top: 0; bottom: 0; left: 0; right: 0; z-index: 50; } .spoiler:hover:before { display: none; } </style> </head> <body> <div class="wrapper-normal"> <div class="post"> <nav class="nav"> <ul class="list"> <li class="item"> <a class="link" href="http://localhost:4000/">Home</a> </li> <li class="item"> <a class="link" href="http://localhost:4000/about">About</a> </li> <li class="item"> <a class="link" href="http://localhost:4000/history">History</a> </li> <li class="item"> <a class="link" href="http://localhost:4000/members">Members</a> </li> <li class="item"> <a class="link" href="http://localhost:4000/blog">Blog</a> </li> </ul> </nav> <h1 class="title">[번역] Pwn2Own 2017: UAF in JSC::CachedCall</h1> <span class="date"> <time datetime="07-04-2019">Sunday. April 07, 2019</time> - <span class="reading-time" title="Estimated read time"> 18 mins </span> </span> <div class="post-tags"> <a class="item" href="http://localhost:4000/tags/#browser">browser</a> </div> <p>출처 : https://phoenhex.re/2017-05-04/pwn2own17-cachedcall-uaf<br /> 번역 및 보완 : LiLi, y0ny0ns0n, powerprove, cheese @ null2root</p> <h1 id="pwn2own-2017-uaf-in-jsccachedcall-webkit">Pwn2Own 2017: UAF in JSC::CachedCall (WebKit)</h1> <p>이 문서는 Samuel Groß(saelo), Niklas Baumstark 에 의해 작성되었다. Pwn2Own 팀을 결성하기 이전부터 함께 CTF 를 참가하곤 했다.</p> <p>우리는 Pwn2Own 에서 찾은 취약점(Safari 공격 및 루트 권한상승)을 설명하는 Write-up 시리즈를 작성했으며 이 문서는 그 중 일부이다. 여기서는 Safari 브라우저(10.0.3)의 렌더러 프로세스에서 발생하는 Use-After-Free 버그 및 RCE 익스플로잇에 대해 설명하고자 한다.</p> <h2 id="웹킷-버그에-대한-두-가지-슬픈-이야기">웹킷 버그에 대한 두 가지 슬픈 이야기</h2> <p>Pwn2Own 에서의 데모 시연은 조금 특이했는데, 우리는 Sarafi 렌더러 내부에서 RCE 를 일으키기 위해 1-day 버그를 사용했다. 이는 불행하게도 우리가 찾은 취약점이 Pwn2Own 시점에 1-day 취약점이 되어버렸기 때문이었다. 2월 초쯤에 Saelo 는 CachedCall 클래스에서 버그를 발견했는데, 처음에는 익스플로잇이 불가능해 보였다. 그러다 2주 정도 뒤에 익스플로잇을 한번 시도해 보기로 결정했고 결국 실행할 수 있는 익스플로잇으로 만들었다. 그 시점에 saelo 는 정말 단순한 poc 파일(poc-cachedcall-uaf.js)의 SHA-256 해시값을 트위터에 올렸는데, 불과 7시간 후(!) 애플의 한 직원이 이에 관한 버그 리포트를 열었다. 이 버그가 Tracker 에 등록되었을 때 hidden 상태가 아니었던 걸 보면, 개발자들이 이 이슈를 보안 이슈로 생각하지는 않았던 것 같다. 나중에서야 우리는 사파리 팀의 내부 퍼저가 버그를 일으켜서 수정을 했어야만 했다는 것을 알게 되었다. 어쨌거나 이 버그를 통해 Full 0-day 익스플로잇 체인을 구성하고자 했던 우리의 바람은 사라지고 말았다.</p> <p>대회까지 약 한 달여를 남겨두고, 우리는 Safari 10.1 업데이트에 적용되는 새로운 WebKit 코드에 집중하기로 했다. 거기서 버그를 찾아내 활용하는 데는 성공했는데, 애플에서는 Pwn2Own 콘테스트 이전에 진행될 macOS 10.12.4 업데이트에 Safari 10.1 을 포함하지 않기로 결정하는 바람에 우리는 또 한번 고배를 마셔야 했다. 우리는 이 두 번째 버그를 보고했으며, 패치가 되기 전까지는 Sarafi 10.1 버전에서 영향을 미친다. 버그가 수정되면 이 버그에 대한 Write-up도 작성할 것이다.</p> <h2 id="overview">Overview</h2> <p>우리가 Pwn2Own에서 사용한 WebKit 버그는 CVE-2017-2491 / ZDI-17-231로, JavaScriptCore 내 JSString 객체에서 발생하는 Use-After-Free 버그이다. 버그가 발생하면 자바스크립트 콜백에서 JSString 객체에 대한 댕글링 포인터를 얻을 수 있다. 처음에는 이 취약점을 익스플로잇으로 만들어 내기 어려워 보였지만 안정적으로 read/write 할 수 있는 좀 더 일반적인 기법을 찾을 수 있었다. 우리는 28GiB 에 달하는 매우 넓은 영역에 힙 스프레이를 진행했고, macOS 의 페이지 압축 메커니즘 덕분에 8GB RAM 을 가진 맥북에서도 스프레이가 가능하다.</p> <p>우리는 아래와 같은 순서로 취약점에 대해 설명하고자 한다.</p> <ul> <li>코드상에서의 버그</li> <li>익스플로잇</li> <li>버그 트리거하기</li> <li>fakeobj/addrof 를 이용한 Read/Write</li> <li>박살난 힙 구조로부터 살아남기</li> </ul> <p>cachedcall-uaf.html 파일에서 주석이 포함된 full exploit 코드를 확인할 수 있다.</p> <h2 id="코드상에서의-버그">코드상에서의 버그</h2> <p>String.prototype.replace 을 호출할 때 첫 번째 인자로 RegExp 객체를 넘기면, WebKit의 JavaScript 엔진인 JSC(JavaScriptCore)에서는 다음과 같은 네이티브 함수를 호출한다.</p> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">static</span> <span class="n">ALWAYS_INLINE</span> <span class="n">EncodedJSValue</span> <span class="nf">replaceUsingRegExpSearch</span><span class="p">(</span>
    <span class="n">VM</span><span class="o">&amp;</span> <span class="n">vm</span><span class="p">,</span> <span class="n">ExecState</span><span class="o">*</span> <span class="n">exec</span><span class="p">,</span> <span class="n">JSString</span><span class="o">*</span> <span class="n">string</span><span class="p">,</span> <span class="n">JSValue</span> <span class="n">searchValue</span><span class="p">,</span> <span class="n">CallData</span><span class="o">&amp;</span> <span class="n">callData</span><span class="p">,</span>
    <span class="n">CallType</span> <span class="n">callType</span><span class="p">,</span> <span class="n">String</span><span class="o">&amp;</span> <span class="n">replacementString</span><span class="p">,</span> <span class="n">JSValue</span> <span class="n">replaceValue</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="c1">// [[ 정규식이 g flag 를 가지고 &amp;&amp; 두번째 인자가 JS function 인 경우 진입 ]]</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">global</span> <span class="o">&amp;&amp;</span> <span class="n">callType</span> <span class="o">==</span> <span class="n">CallType</span><span class="o">::</span><span class="n">JS</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// regExp-&gt;numSubpatterns() + 1 for pattern args, + 2 for match start and string</span>
        <span class="kt">int</span> <span class="n">argCount</span> <span class="o">=</span> <span class="n">regExp</span><span class="o">-&gt;</span><span class="n">numSubpatterns</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
        <span class="n">JSFunction</span><span class="o">*</span> <span class="n">func</span> <span class="o">=</span> <span class="n">jsCast</span><span class="o">&lt;</span><span class="n">JSFunction</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">replaceValue</span><span class="p">);</span>
        <span class="n">CachedCall</span> <span class="n">cachedCall</span><span class="p">(</span><span class="n">exec</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="n">argCount</span><span class="p">);</span>        <span class="c1">// [[ 0 ]]</span>
        <span class="n">RETURN_IF_EXCEPTION</span><span class="p">(</span><span class="n">scope</span><span class="p">,</span> <span class="n">encodedJSValue</span><span class="p">());</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">source</span><span class="p">.</span><span class="n">is8Bit</span><span class="p">())</span> <span class="p">{</span>
            <span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
                <span class="kt">int</span><span class="o">*</span> <span class="n">ovector</span><span class="p">;</span>
                <span class="n">MatchResult</span> <span class="n">result</span> <span class="o">=</span> <span class="n">regExpConstructor</span><span class="o">-&gt;</span><span class="n">performMatch</span><span class="p">(</span><span class="n">vm</span><span class="p">,</span> <span class="n">regExp</span><span class="p">,</span> <span class="n">string</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">startPosition</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ovector</span><span class="p">);</span>
                <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">result</span><span class="p">)</span>
                    <span class="k">break</span><span class="p">;</span>

                <span class="k">if</span> <span class="p">(</span><span class="n">UNLIKELY</span><span class="p">(</span><span class="o">!</span><span class="n">sourceRanges</span><span class="p">.</span><span class="n">tryConstructAndAppend</span><span class="p">(</span><span class="n">lastIndex</span><span class="p">,</span> <span class="n">result</span><span class="p">.</span><span class="n">start</span> <span class="o">-</span> <span class="n">lastIndex</span><span class="p">)))</span>
                    <span class="n">OUT_OF_MEMORY</span><span class="p">(</span><span class="n">exec</span><span class="p">,</span> <span class="n">scope</span><span class="p">);</span>

                <span class="kt">unsigned</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
                <span class="k">for</span> <span class="p">(;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">regExp</span><span class="o">-&gt;</span><span class="n">numSubpatterns</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kt">int</span> <span class="n">matchStart</span> <span class="o">=</span> <span class="n">ovector</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span><span class="p">];</span>
                    <span class="kt">int</span> <span class="n">matchLen</span> <span class="o">=</span> <span class="n">ovector</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">matchStart</span><span class="p">;</span>

                    <span class="k">if</span> <span class="p">(</span><span class="n">matchStart</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>
                        <span class="n">cachedCall</span><span class="p">.</span><span class="n">setArgument</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">jsUndefined</span><span class="p">());</span>
                    <span class="k">else</span>
                        <span class="c1">// [[ 1 ]]</span>
                        <span class="n">cachedCall</span><span class="p">.</span><span class="n">setArgument</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">jsSubstring</span><span class="p">(</span><span class="o">&amp;</span><span class="n">vm</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">matchStart</span><span class="p">,</span> <span class="n">matchLen</span><span class="p">));</span>
                <span class="p">}</span>

                <span class="n">cachedCall</span><span class="p">.</span><span class="n">setArgument</span><span class="p">(</span><span class="n">i</span><span class="o">++</span><span class="p">,</span> <span class="n">jsNumber</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">start</span><span class="p">));</span>
                <span class="n">cachedCall</span><span class="p">.</span><span class="n">setArgument</span><span class="p">(</span><span class="n">i</span><span class="o">++</span><span class="p">,</span> <span class="n">string</span><span class="p">);</span>

                <span class="n">cachedCall</span><span class="p">.</span><span class="n">setThis</span><span class="p">(</span><span class="n">jsUndefined</span><span class="p">());</span>
                <span class="n">JSValue</span> <span class="n">jsResult</span> <span class="o">=</span> <span class="n">cachedCall</span><span class="p">.</span><span class="n">call</span><span class="p">();</span>           <span class="c1">// [[ 2 ]]</span>
                <span class="n">replacements</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">jsResult</span><span class="p">.</span><span class="n">toWTFString</span><span class="p">(</span><span class="n">exec</span><span class="p">));</span>
                <span class="n">RETURN_IF_EXCEPTION</span><span class="p">(</span><span class="n">scope</span><span class="p">,</span> <span class="n">encodedJSValue</span><span class="p">());</span>

                <span class="n">lastIndex</span> <span class="o">=</span> <span class="n">result</span><span class="p">.</span><span class="n">end</span><span class="p">;</span>
                <span class="n">startPosition</span> <span class="o">=</span> <span class="n">lastIndex</span><span class="p">;</span>

                <span class="c1">// special case of empty match</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span>
                    <span class="n">startPosition</span><span class="o">++</span><span class="p">;</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">startPosition</span> <span class="o">&gt;</span> <span class="n">sourceLen</span><span class="p">)</span>
                        <span class="k">break</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>

    <span class="c1">// ...</span>
</code></pre></div></div> <p>[[ 0 ]] 에서는 CachedCall 인스턴스를 생성하는데, 이는 나중에 콜백 함수를 호출할 때 사용된다. Safari 10.0.3 에서 사용하는 Webkit 보관소의 branch에서 CachedCall 클래스는 아래와 같이 구성되어 있다.</p> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">CachedCall</span> <span class="p">{</span>

    <span class="c1">// ...</span>

    <span class="nl">private:</span>
        <span class="kt">bool</span> <span class="n">m_valid</span><span class="p">;</span>
        <span class="n">Interpreter</span><span class="o">*</span> <span class="n">m_interpreter</span><span class="p">;</span>
        <span class="n">VM</span><span class="o">&amp;</span> <span class="n">m_vm</span><span class="p">;</span>
        <span class="n">VMEntryScope</span> <span class="n">m_entryScope</span><span class="p">;</span>
        <span class="n">ProtoCallFrame</span> <span class="n">m_protoCallFrame</span><span class="p">;</span>
        <span class="n">Vector</span><span class="o">&lt;</span><span class="n">JSValue</span><span class="o">&gt;</span> <span class="n">m_arguments</span><span class="p">;</span>
        <span class="n">CallFrameClosure</span> <span class="n">m_closure</span><span class="p">;</span>
<span class="p">};</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">m_arguments</code> 라는 변수명에서 볼 수 있듯이, Cachedcall 에서는 인자값을 저장하기 위해 WTF::Vector 타입을 사용하고 있다. 그리고 코드에서는 [[1]] 의 jsSubstring 에서만 <code class="language-plaintext highlighter-rouge">m_arguments</code> 멤버변수를 참조하고 있다.</p> <p>이 변수와 타입의 문제점을 이야기하기 전에 먼저 가비지 컬렉터에 대해 알아볼 필요가 있다. JavaScriptCore에서 가비지 컬렉터에 의해 수명이 관리되는 모든 객체는 JSCell 로부터 상속된다. 가비지 컬렉터의 동작 알고리즘(Mark &amp; sweep)에 따라, JSCell에 대한 참조를 탐색하기 위해 주로 찾아가는 루트가 있다.</p> <ul> <li>현재의 call stack</li> <li>흔히 전역 객체(global object) 라고 불리는 전역 자바스크립트 실행 컨텍스트(global JavaScript execution context)</li> <li>몇몇 특별한 버퍼 - MarkedArgumentBuffer 등등</li> <li>기타 등등</li> </ul> <p>이러한 위치로부터 탐색한 결과, 어떤 곳에서도 참조를 하지 않는(도달하지 않는) 객체의 경우, 가비지 컬렉터의 sweep 단계에서 free 될 수 있다.</p> <p>다시 <code class="language-plaintext highlighter-rouge">m_arguments</code> 로 돌아가 보자. CachedCall 에서 <code class="language-plaintext highlighter-rouge">m_arguments</code> 가 사용하는 <code class="language-plaintext highlighter-rouge">WTF::Vector</code> 타입은 Opaque 데이터 타입으로, 외부 인터페이스에서는 타입의 내부 구조를 명확히 알 수 없도록 구성되어 있다. 이런 특징으로 인해 가비지 컬렉터는 <code class="language-plaintext highlighter-rouge">m_arguments</code> 내부에서 어떤 객체를 참조하고 있는지 정확히 체크할 수 없다. 따라서, 만약 특정 객체에 대한 유일한 참조가 <code class="language-plaintext highlighter-rouge">WTF::Vector</code> 타입 안에 들어 있다면 가비지 컬렉터는 해당 객체의 참조를 찾지 못해 그 객체를 free 해 버리는 경우가 생길 수 있다.</p> <p>이런 문제점을 활용하기 위해, 위 코드의 [[1]] 에서 새로운 string 인자를 할당하는 중에 가비지 컬렉팅이 일어났다고 가정해 보자(가비지 컬렉팅은 언제든 발생할 수 있으므로 충분히 일어날 수 있는 일이다). 그 결과 이전에 사용하던 인자값(JSString 인스턴스)들은 sweep 및 free 가 될 것이다. 이후 [[2]] 에서 <code class="language-plaintext highlighter-rouge">cachedCall.call()</code> 을 호출하면, cachedCall 의 콜백 함수 내에서는 앞서 free 되고 남은 JSCells 포인터를 인자값으로 착각하고 사용(Use-After-Free)하게 된다. 가비지 컬렉팅은 콜백 전에 발생해야 한다.</p> <p>poc-cached call-uaf.js 파일은 위 가정을 증명하는 PoC 코드로, Safari 10.0.3에서 작동한다. 스크립트 마지막의 i_am_free 는 JSString 이 free 되고 남은 포인터이다. JSCell 헤더가 free-list 포인터(역주 - heap exploit의 bin과 유사)로 덮어 씌워지기 때문에, <code class="language-plaintext highlighter-rouge">typeof()</code> 이외의 작업을 하면 크래시가 발생할 가능성이 있다. 관련 소스 코드는 다음과 같다.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">i_want_to_break_free</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="mh">0x40000</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">regex</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="dl">"</span><span class="s2">(ab)</span><span class="dl">"</span><span class="p">.</span><span class="nx">repeat</span><span class="p">(</span><span class="nx">n</span><span class="p">),</span> <span class="dl">"</span><span class="s2">g</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// g flag to trigger the vulnerable path // (ab)(ab)(ab)(ab)(ab)...(ab)</span>
    <span class="kd">var</span> <span class="nx">part</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">ab</span><span class="dl">"</span><span class="p">.</span><span class="nx">repeat</span><span class="p">(</span><span class="nx">n</span><span class="p">);</span> <span class="c1">// matches have to be at least size 2 to prevent interning</span>
    <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="p">(</span><span class="nx">part</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">|</span><span class="dl">"</span><span class="p">).</span><span class="nx">repeat</span><span class="p">(</span><span class="nx">m</span><span class="p">);</span> <span class="c1">// ab|ab|ab|ab|ab|ab|ab|....ab|ab|</span>
    <span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">cnt</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">ary</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nx">s</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">regex</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">2</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">!==</span> <span class="dl">'</span><span class="s1">string</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nx">i_am_free</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
                    <span class="k">throw</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="nx">ary</span><span class="p">[</span><span class="nx">cnt</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>  <span class="c1">// root everything to force GC</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="dl">"</span><span class="s2">x</span><span class="dl">"</span><span class="p">;</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">try</span> <span class="p">{</span> <span class="nx">i_want_to_break_free</span><span class="p">();</span> <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nx">i_am_free</span><span class="p">));</span>  <span class="c1">// will print "object" </span>
</code></pre></div></div> <p>이 버그는 CachedCall 클래스의 Vector 타입을 MarkedArgumentBuffer 로 교체함으로써 수정되었다.</p> <h2 id="익스플로잇">익스플로잇</h2> <p>브라우저에서 UAF 취약점을 공략할 때에는 객체가 free 된 공간에 새로운 객체를 할당하여 type confusion 을 일으켜 익스플로잇으로 이어나가는 것이 일반적이다. 그러나 JSC 에서는 상황이 조금 다른데, JSCell 객체들은 자신의 타입 정보를 자신의 객체 내에 저장하고 있다. 따라서 free 된 위치에 다른 JSCell 이 할당되더라도 기존의 댕글링 포인터를 직접적으로 익스플로잇에 이용할 수 없다. 하지만 free 된 객체 내부에 또 다른 free 된 객체(가비지 컬렉터 등에 의해)를 포함하고 있다면, 혹은 댕글링 포인터가 정렬이 잘못되어 다른 JSCell 의 내부를 가리키게 된다면 여전히 공격은 가능할 것이다(역주 - 2-staged 공격에서처럼 free 된 두 개의 객체를 타고 들어가 공격을 진행할 수 있다). 전자의 공격 방법을 사용한 대표적인 예로 페가수스 익스플로잇이 있는데, free 된 JSArray 객체의 댕글링 포인터를 통해 JSArray 내부 버퍼에 접근하여 익스플로잇을 하도록 구성되어 있다.</p> <p>추가로, 공격을 위해 활용한 다음 2가지 사실에 대해서는 별도의 설명을 하지 않는다.</p> <ol> <li>replace() 코드에서 jsSubstring 호출 결과로 생성되는 JSString 객체는 기존의 JSString 과 내용을 공유하며, 기존의 JSString 객체는 계속 유지된다.</li> <li>24 bytes 또는 32 bytes 크기의 JSCell 들을 할당하기 위해 별도로 마련된 힙 공간이 있으며, JSString 객체 또한 32 bytes 로 정렬되어 해당 힙 공간에 할당된다.</li> </ol> <p>적용할 만한 일반적인 기술들을 떠올려 보았지만 생각나는 유일한 방법은 아레나를 포함하는 전체 힙 블록을 free 하고 그 자리에 다른 타입의 새로운 아레나를 할당하는 것이었다. 우리는 다른 방법을 찾기 위해 애썼고 마침내 Pwn2Own 에서 적용할 만한 매우 일반적인 접근법을 찾을 수 있었다.</p> <h2 id="jscell-free-list-pointer-type-confusion">JSCell free-list pointer type confusion</h2> <p>가비지 컬렉터가 JSCell 을 모아서 처리할 때, JSCell 의 첫 8바이트는 같은 힙 블록 내에 있는 다음 free 된 JSCell 대한 포인터로 대체된다(역주 - heap exploit의 bin과 유사). JSCell 의 나머지 부분은 바뀌지 않는다. 이 때문에 free 된 JSString 객체의 영역에 다른 객체를 할당하지 않고 댕글링 포인터를 사용하려고 하면 충돌이 발생한다.</p> <p>Crash 를 우회하기 위해 JSCell의 처음 8바이트가 어떻게 구성되는지 살펴보자.</p> <div class="language-c++ highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">StructureID</span> <span class="n">m_structureID</span><span class="p">;</span>           <span class="c1">// dword</span>
<span class="n">IndexingType</span> <span class="n">m_indexingTypeAndMisc</span><span class="p">;</span>  <span class="c1">// byte</span>
<span class="n">JSType</span> <span class="n">m_type</span><span class="p">;</span>                       <span class="c1">// byte</span>
<span class="n">TypeInfo</span><span class="o">::</span><span class="n">InlineTypeFlags</span> <span class="n">m_flags</span><span class="p">;</span>   <span class="c1">// byte</span>
<span class="n">CellState</span> <span class="n">m_cellState</span><span class="p">;</span>               <span class="c1">// byte</span>
</code></pre></div></div> <p>이 8바이트가 포인터로 대체되기 때문에, 각각의 값들이 valid 한 값으로 인식되려면 힙 주소가 주로 어떤 범위의 값을 갖는지를 알 필요가 있다. 이 점을 고려했을 때, Safari 의 Heap ASLR 이 예측 가능한 범위 내에서 일어난다는 사실은 매우 유용하게 쓰일 수 있다. macOS 10.12.3 의 Safari 에서 힙 주소는 0x110000000 - 0x120000000 범위에서 시작하여 쭉 증가한다. 이 범위의 포인터로 JSCell 헤더를 덮어쓰게 되면 주소값의 하위 32비트가 <code class="language-plaintext highlighter-rouge">m_structureID</code> 와 중첩되고, 비트 32-39가 <code class="language-plaintext highlighter-rouge">m_indexingTypeAndMisc</code>, 나머지 3개 필드는 0이 된다.</p> <p>익스플로잇에 활용하기에 편리한 JSObject 객체를 array 버퍼를 활용하여 스프레이 하기로 하자. JSObject 는 NonArrayWithContiguous 이므로 IndexingType 을 8 로 맞춰주어야 한다. 따라서 <code class="language-plaintext highlighter-rouge">0x8000000 ~ 0x8ffffffffffe</code> 주소 범위에 객체가 위치해야 하며, 4 GiB 크기의 스프레이를 7 번 정도 진행해야 한다. 이 정도 크기의 스프레이는 MacOS 에서 지원하는 페이지 압축을 통해 어렵지 않게 가능하지만, Pwn2Own 에서 사용했던 타깃 머신(2016년형 13.3인치 MacBook Pro, 16GB 메모리)에서는 스프레이에 대략 50초 정도가 걸린다.</p> <p>IndexingType 8 은 좀 더 정확하게는 <code class="language-plaintext highlighter-rouge">JSValues (ContinuousShape)</code> 의 <code class="language-plaintext highlighter-rouge">fast contiguous storage</code> 에 해당한다. 이러한 타입의 객체에 <code class="language-plaintext highlighter-rouge">obj[0], obj[1]...</code> 와 같이 인덱스로 접근하면, 객체의 속성 전부를 검색하는 대신 객체의 butterfly 를 직접 참조하게 된다(butterfly 의 동작은 saelo의 프랙 문서 1.2절에 설명되어 있다). butterfly 포인터는 JSObject 의 두 번째 qword 로, free 된 JSString 인스턴스의 <code class="language-plaintext highlighter-rouge">flags(dword) - length(dword)</code> 영역과 겹치게 된다. 우리는 이 값을 힙 스프레이 영역 내부를 가리키는 <code class="language-plaintext highlighter-rouge">0x200000001</code> 값이 되도록 익스플로잇을 구성했다. 다음 그림은 JSCell 헤더를 <code class="language-plaintext highlighter-rouge">0x8xxxxxx</code> 형식의 힙 포인터로 덮어쓴 후 발생한 JSString 과 JSObject 간의 중첩을 나타낸다.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Original JSString:


 JSCell fields                                              JSString fields
+---------------------------------------------------------------------------+
| dword        | byte         | byte   | byte  | byte      | dword | dword  |
| StructureID  | IndexingType | JSType | flags | CellState | flags | length |
|              |              |        |       |           |       |        |
| *            | *            | *      | *     | *         | 0x01  | 0x02   |
+---------------------------------------------------------------------------+


After header is overwritten by the pointer 0x8xxxxxxxx, we get a JSObject:


 JSCell fields                                              JSObject fields
+---------------------------------------------------------------------------+
| dword        | byte         | byte   | byte  | byte      | qword          |
| StructureID  | IndexingType | JSType | flags | CellState | butterfly ptr  |
|              |              |        |       |           |                |
| xxxxxxxx     | 0x08         | 0      | 0     | 0         | 0x200000001    |
+---------------------------------------------------------------------------+

</code></pre></div></div> <p>이렇게 생성된 fake JSObject 는 <code class="language-plaintext highlighter-rouge">0x20000001</code> 영역을 butterfly 로 인식하게 되며, <code class="language-plaintext highlighter-rouge">fast-path indexing</code> 에 따라 인덱스를 통해 butterfly 영역에 직접 접근할 수 있다. 또한 butterfly(<code class="language-plaintext highlighter-rouge">0x20000001</code>)의 주소는 앞서 힙 스프레이를 통해 ArrayBuffer 로 덮어놓은 영역으로, 컨트롤 가능한 상태이다. 이는 프랙문서 4절에서 설명한 것처럼, 가짜 JSObject 에 값을 쓰고 ArrayBuffer 에서 값을 읽음으로써 fakeobj/addrof 를 구현했던 것과 완전히 동일한 형태이다. 여기서부터는 프랙 문서와 완전히 동일하게 익스플로잇이 진행된다. 임의의 읽기/쓰기가 가능한 객체를 만들고, 자바스크립트 함수를 JIT 코드로 만들어 쉘코드로 덮어 쓴 후 함수를 실행한다.</p> <p>이제 StructureID 변수만 고려해 주면 된다. 코드 실행 과정에서 엔진이 fake JSObject 의 structure 에 접근하기 때문에 StructureID 또한 valid 한 값을 가져야 한다. structure 인스턴스의 포인터들을 보관하는 테이블이 존재하며, structure ID 를 인덱스로 하여 테이블에서 structure 를 얻어올 수 있다. 문제는 StructureID 영역을 우리가 원하는 대로 컨트롤 할 수 없기 때문에(free-list 포인터로 덮어쓰이기 때문), 포인터를 인덱스한 접근은 테이블의 범위를 넘어서 앞서 우리가 스프레이한 메모리 영역에 접근하게 된다. 그러므로 우리는 우리의 힙 스프레이 영역에 미리 fake structure 를 만들어 두어야 한다.</p> <p>수 GB 에 달하는 스프레이 영역 중에서 어느 위치에 fake structure 인스턴스 를 두어야 할까 ? 이를 위해서는 free-list 포인터가 어떤 값을 갖게 될 것인지 어느 정도 예측해야 한다. 우선 free list 포인터는 JSC 메모리 할당 단위인 16 bytes 로 정렬된다. 또한 structure 테이블을 통해 structure 인스턴스에 접근하는 경우, 인덱스에 8을 곱한다(포인터 사이즈 만큼). 그러므로 우리는 스프레이를 할 때에 128 bytes (16 * 8) 마다 structure 포인터를 포함시켜 주면 된다. 익스플로잇 코드에서 스프레이를 할 때 모든 fake 테이블 포인터 값을 <code class="language-plaintext highlighter-rouge">0x150000008</code> 고정값으로 설정하고, 스프레이 되는 데이터 블록의 시작 부분마다 fake structure 인스턴스를 만들도록 했다.</p> <h2 id="버그-트리거하기">버그 트리거하기</h2> <p>앞서 살펴본 접근방법은 꽤나 직관적이고 심플해 보인다.</p> <ol> <li>힙이 <code class="language-plaintext highlighter-rouge">0x8xxxxxxxx</code> 주소 영역까지 사용하도록 스프레이하기</li> <li>버그 트리거하기</li> </ol> <p>하지만 두 번째 단계는 사실 그렇게 쉽지 않다. Safari 10.0.3 환경에서 PoC 코드를 실행해 보면 즉시 버그가 트리거되는 것 같지만, 사실 PoC 에서는 힙이 너무 작아서 가비지 컬렉팅이 매우 자주 발생하기 때문에 빠르게 트리거된 것이다. JSC allocator 의 휴리스틱 때문에, 28 GB 의 메모리를 할당한 상황에서 가비지 컬렉터가 동작할 확률은 거의 없다.</p> <p>그러나 다행스러운 것은, 가비지 컬렉터는 결정론적 알고리즘으로 동작한다는 것이다. 최신 웹킷에는 Riptide 라는 새로운 동시성 가비지 컬렉터(Concurrent GC)가 등장하긴 했지만, 최소한 Safari 10.0.3 의 JSC 버전에서는 그렇다. 그래서 우리는 <code class="language-plaintext highlighter-rouge">0x8xxxxxx</code> 영역에서 버그를 안정적으로 트리거할 수 있는 [힙 스프레이-정규식-입력 문자열]의 조합을 찾아낼 때까지 반복문을 계속 돌렸다. 익스플로잇 코드에서는 <code class="language-plaintext highlighter-rouge">String.prototype.replace</code> 함수를 반복적으로 호출하기 이전에 14 GiB 의 array 버퍼를 스프레이하도록 했다. 이 과정은 이후 free 된 JSString 의 IndexType 이 결국 8 값으로 덮어씌여지는 상황을 안정적으로 만들어 준다.</p> <p>우리는 최신 웹킷에서도 익스플로잇을 동작시킬 수 있는 몇 가지 아이디어를 가지고 있었지만, 애플이 버그를 수정하여 더 이상 진행하지 않았다. 다만 이를 통해 우리가 작성한 익스플로잇이 힙의 상태에 매우 의존적이라는 것을 알 수 있다. 만약 익스플로잇의 메모리 할당 패턴을 너무 많이 바꾸면, 그 버그는 더 이상 정확한 시간에 트리거되지 않으며 익스플로잇에 실패하게 된다</p> <h2 id="fakeobjaddrof-를-이용한-readwrite">fakeobj/addrof 를 이용한 Read/Write</h2> <p>Saelo의 프랙문서에서는 임의의 읽기/쓰기를 하기 위해 가짜 JSC 객체를 활용했다. 접근 방법은 아래와 같다.</p> <ol> <li>Float64Array structure들을 대량 스프레이한다. 그러면 비교적 신뢰성 있게 올바른 structure ID 를 게싱할 수 있다.</li> <li>JSObject 의 inline 속성을 활용하여, Float64Array 타입의 fake 객체를 구성한다. 이 fake 객체를 <code class="language-plaintext highlighter-rouge">fakearray</code> 라고 하자. <code class="language-plaintext highlighter-rouge">fakearray</code> 의 JSCell 은 앞서 얻은 structureID 를 가지며, 데이터 포인터(hax라고 하자)는 Uint8Array 객체를 가리키도록 한다.</li> <li><code class="language-plaintext highlighter-rouge">fakearray[2] = &lt;target address&gt;</code> 로 세팅함으로써 hax 를 통한 read/write 가 가능해진다.</li> </ol> <p>위 단계의 레이아웃을 아래와 같이 그려볼 수 있다.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   fakearray                             hax
+----------------+                  +----------------+
|  Float64Array  |   +-------------&gt;|  Uint8Array    |
|                |   |              |                |
|  JSCell        |   |              |  JSCell        |
|  butterfly     |   |              |  butterfly     |
|  vector  ------+---+              |  vector        |
|  length        |                  |  length        |
|  mode          |                  |  mode          |
+----------------+                  +----------------+
</code></pre></div></div> <p>Pwn2Own 에 사용할 익스플로잇에서도 위와 같은 방식으로 공격하려고 했지만, 1단계에서 힙 레이아웃이 엉망진창이 되는 바람에 그대로 활용할 수가 없었다. 익스플로잇을 복잡하게 만들고 싶지는 않았기에, 우리는 새로 배운 트릭을 활용했다.</p> <ol> <li>다른 객체의 inline 속성을 활용하여, <code class="language-plaintext highlighter-rouge">fakearray</code> 라는 이름의 fake JSObject 객체를 만든다. <code class="language-plaintext highlighter-rouge">fakearray</code> 의 Indexing type 은 8, structure ID 는 0, butterfly(hax 라고 하자) 는 Uint8Array 객체를 가리키도록 구성한다.</li> <li>hax2 라는 이름의 Uint8Array 객체를 추가로 만든다.</li> <li><code class="language-plaintext highlighter-rouge">fakearray[2] = hax2</code> 가 되도록 세팅한다. 그러면 hax 의 데이터 버퍼는 hax2 를 가리키게 된다.</li> <li>read/write 를 위해 <code class="language-plaintext highlighter-rouge">hax[16]</code>, 즉 hax 의 데이터 포인터 에 target address 를 쓴다. 그러면 hax2 의 데이터 버퍼가 target 을 가리키게 될 것이다. 그러면 hax 를 통해 read/write 가 가능하게 된다.</li> </ol> <p>이 트릭은 Safari 10.0.3 환경에서 ID 값이 0인 structure 가 항상 존재하기 때문에 효과가 있다. 이 단계의 레이아웃을 아래와 같이 그려볼 수 있다.</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     fakearray                        hax                       hax2
+--------------------+         +------------------+        +--------------+
|  JSObject          |   +----&gt;|  Uint8Array      |  +----&gt;|  Uint8Array  |
|                    |   |     |                  |  |     |              |
|  structureID = 0   |   |     |  JSCell          |  |     |  JSCell      |
|  indexingType = 8  |   |     |  butterfly       |  |     |  butterfly   |
|  &lt;rest of JSCell&gt;  |   |     |  vector       ------+     |  vector      |
|  butterfly       ------+     |  length = 0x100  |        |  length      |
|                    |         |  mode            |        |  mode        |
+--------------------+         +------------------+        +--------------+
</code></pre></div></div> <h2 id="박살난-힙-구조로부터-살아남기">박살난 힙 구조로부터 살아남기</h2> <p>free된 JSStrings 중 하나에 JSCell을 할당함으로써, JSString이 저장된 힙 블록의 free list 를 잘 손상시킬 수 있었다. 여기서 할당자를 완전히 망가뜨렸기 때문에, 익스플로잇을 할 때 24 bytes 혹은 32 bytes 크기의 할당은 하지 않도록 주의해야 한다. 말은 간단해서, 아예 객체 생성을 안해버릴 수도 있을 것이다. 그러나 자바스크립트 함수를 호출한다거나 혹은 16번 이상의 반복문 실행으로 인해 JIT 컴파일이 발생한다거나 하는 경우가 발생하면, 엔진 내부에서는 이 문제 있는 사이즈로 메모리 할당을 하게 되고 즉시 크래시로 이어지게 된다.</p> <p>망가진 free list 를 고쳐 그나마 문제없이 돌아갈 정도의 힙 상태로 복구할 수는 있었겠지만 그러기 위해서는 반복문, 함수호출/정의, 또는 다른 위험한 작업을 필요로 할 것 같았다. Pwn2Own 의 목적을 위해 우리는 지저분하더라도 reliable 한 코드를 작성하기로 결정했다. 2단계에서 우리는 SIGSEGV, SIGBUS, SIGALRM 의 시그널 핸들러가 sleep 함수를 호출하도록 했다. 이렇게 하면 sandbox escape 가 진행되는 동안, 실행 중인 어떤 쓰레드도 프로세스를 파괴할 수 없다.</p> <p>주석이 포함된 전체 익스플로잇 코드는 cachedcall-uaf.html 파일에서 찾을 수 있다.</p> <div class="blog-navigation"> <a class="prev" href="http://localhost:4000/blog/2019/04/07/Attacking-JavaScript-Engines-kor.html">&laquo; [번역] Attacking JavaScript Engine</a> <a class="next" href="http://localhost:4000/blog/2019/04/09/Butterfree-Codegate-19.html">[Writeup] Butterfree - Codegate '19 &raquo;</a> </div> <div class="related"> <h4>Related Posts</h4> <ul> <li class="relatedPost"> <a href="http://localhost:4000/blog/2019/05/28/CVE-2017-2491-digging.html">CVE-2017-2491 삽질기 </a> </li> <li class="relatedPost"> <a href="http://localhost:4000/blog/2019/04/09/CVE-2016-4622-digging.html">CVE-2016-4622 삽질기 </a> </li> <li class="relatedPost"> <a href="http://localhost:4000/blog/2019/04/09/Butterfree-Codegate-19.html">[Writeup] Butterfree - Codegate '19 </a> </li> <li class="relatedPost"> <a href="http://localhost:4000/blog/2019/04/07/Attacking-JavaScript-Engines-kor.html">[번역] Attacking JavaScript Engine </a> </li> </ul> </div> <section class="author"> <div class="toleft"> <img class="selfie" src="http://localhost:4000/assets/images/NR-New2023-300x300-white.png" alt="null2root" alt="author selfie"> </div> <div class="toright"> <h4 class="name">null2root</h4> <p class="bio">underground hacker group</p> <div class="share"> <!-- Note: Only use three share links if your site width is set to large --> <!-- If site width is set to normal, you may choose any two share links --> <a class="twitter" href="https://twitter.com/intent/tweet?text=http://localhost:4000/blog/2019/04/07/Pwn2Own-2017-cachedcall-kor.html - [번역] Pwn2Own 2017: UAF in JSC::CachedCall by @"> <svg class="icon icon-twitter"><use xlink:href="#icon-twitter"></use></svg><span class="icon-twitter">Tweet</span> </a> <a class="facebook" href="javascript:void(0)" onclick="window.open('https://facebook.com/sharer/sharer.php?u='+encodeURIComponent(location.href), 'facebook-share-dialog', 'width=626,height=436'); return false;"> <svg class="icon icon-facebook"><use xlink:href="#icon-facebook"></use></svg><span class="icon-facebook-rect">Share</span> </a> <!-- <a class="google-plus" href="https://plus.google.com/share?url=http://localhost:4000/blog/2019/04/07/Pwn2Own-2017-cachedcall-kor.html" target="_blank"> <svg class="icon icon-google-plus"><use xlink:href="#icon-google-plus"></use></svg><span class="icon-google-plus">Share</span> </a> --> <!-- <a class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http://localhost:4000/blog/2019/04/07/Pwn2Own-2017-cachedcall-kor.html&amp;title=[번역] Pwn2Own 2017: UAF in JSC::CachedCall&amp;summary=&amp;source=http://localhost:4000" target="_blank"> <svg class="icon icon-linkedin"><use xlink:href="#icon-linkedin"></use></svg><span class="icon-linkedin">Share</span> </a> --> <!-- <a class="reddit" href="https://reddit.com/submit?url=http://localhost:4000/blog/2019/04/07/Pwn2Own-2017-cachedcall-kor.html&amp;title=[번역] Pwn2Own 2017: UAF in JSC::CachedCall" target="_blank"> <svg class="icon icon-reddit"><use xlink:href="#icon-reddit"></use></svg><span class="icon-reddit">Share</span> </a> --> </div> </div> </section> <section class="disqus"> <div id="disqus_thread"></div> <script type="text/javascript"> var disqus_config = function () { this.page.url = 'http://localhost:4000/blog/2019/04/07/Pwn2Own-2017-cachedcall-kor.html'; this.page.identifier = '/blog/2019/04/07/Pwn2Own-2017-cachedcall-kor'; }; var disqus_shortname = 'mydisqus'; var disqus_developer = 0; (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a> </section> <footer class="footer-main"> NULL@ROOT © 2025 <a class="link" href="http://localhost:4000/feed.xml" target="_blank"><svg class="icon icon-rss"><use xlink:href="#icon-rss"></use></svg></a> <p class="extra"> <a class="link" href="https://github.com/sergiokopplin/indigo">Indigo theme</a> by <a class="link" href="https://github.com/sergiokopplin/indigo">Kopplin</a> </p> </footer> </div> </div> <svg display="none" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <defs> <symbol id="icon-rss" viewBox="0 0 1024 1024"> <title>rss</title> <path class="path1" d="M122.88 122.88v121.19c362.803 0 656.896 294.195 656.896 656.998h121.293c0-429.773-348.416-778.189-778.189-778.189zM122.88 365.414v121.293c228.813 0 414.362 185.498 414.362 414.413h121.242c0-295.834-239.821-535.706-535.603-535.706zM239.053 668.621c-64.205 0-116.224 52.122-116.224 116.275s52.019 116.224 116.224 116.224 116.173-52.019 116.173-116.224-51.968-116.275-116.173-116.275z"></path> </symbol> <symbol id="icon-facebook" viewBox="0 0 1024 1024"> <title>facebook</title> <path class="path1" d="M870.4 51.2h-716.8c-56.32 0-102.4 46.080-102.4 102.4v716.8c0 56.371 46.080 102.4 102.4 102.4h358.4v-358.4h-102.4v-126.72h102.4v-104.96c0-110.797 62.054-188.621 192.819-188.621l92.314 0.102v133.376h-61.286c-50.893 0-70.246 38.195-70.246 73.626v86.528h131.482l-29.082 126.669h-102.4v358.4h204.8c56.32 0 102.4-46.029 102.4-102.4v-716.8c0-56.32-46.080-102.4-102.4-102.4z"></path> </symbol> <symbol id="icon-twitter" viewBox="0 0 1024 1024"> <title>twitter</title> <path class="path1" d="M886.579 319.795c0.41 8.294 0.563 16.691 0.563 24.986 0 255.488-194.406 549.99-549.888 549.99-109.21 0-210.739-32-296.294-86.886 15.155 1.792 30.515 2.714 46.080 2.714 90.624 0 173.926-30.925 240.026-82.688-84.531-1.587-155.955-57.395-180.531-134.195 11.776 2.202 23.91 3.379 36.352 3.379 17.664 0 34.765-2.304 50.944-6.707-88.422-17.818-155.034-95.898-155.034-189.594 0-0.819 0-1.587 0-2.406 26.061 14.49 55.91 23.194 87.552 24.218-51.866-34.714-86.016-93.798-86.016-160.922 0-35.379 9.523-68.608 26.214-97.178 95.283 116.992 237.773 193.894 398.387 201.984-3.277-14.182-4.966-28.877-4.966-44.083 0-106.701 86.477-193.178 193.229-193.178 55.603 0 105.83 23.398 141.107 60.979 43.981-8.704 85.35-24.781 122.726-46.899-14.438 45.107-45.107 82.995-84.992 106.906 39.117-4.71 76.288-15.002 111.002-30.413-25.907 38.81-58.675 72.806-96.461 99.994z"></path> </symbol> <symbol id="icon-github" viewBox="0 0 1024 1024"> <title>github</title> <path class="path1" d="M674.816 579.021c-36.762 0-66.56 41.318-66.56 92.109 0 50.893 29.798 92.211 66.56 92.211s66.56-41.318 66.56-92.211c-0.051-50.79-29.798-92.109-66.56-92.109zM906.547 339.251c7.629-18.688 7.936-124.877-32.512-226.611 0 0-92.723 10.189-233.011 106.496-29.44-8.192-79.258-12.186-128.973-12.186-49.818 0-99.584 3.994-129.024 12.186-140.339-96.307-233.062-106.496-233.062-106.496-40.397 101.734-39.987 207.923-32.461 226.611-47.514 51.61-76.544 113.613-76.544 198.195 0 367.923 305.306 373.811 382.31 373.811 17.51 0 52.122 0.102 88.781 0.102 36.608 0 71.27-0.102 88.678-0.102 77.107 0 382.31-5.888 382.31-373.811 0-84.582-28.979-146.586-76.493-198.195zM513.434 866.048h-2.867c-193.075 0-343.501-22.989-343.501-210.688 0-45.005 15.872-86.682 53.606-121.293 62.822-57.702 169.216-27.187 289.894-27.187 0.512 0 1.024 0 1.485 0 0.512 0 0.922 0 1.382 0 120.678 0 227.123-30.515 289.997 27.187 37.632 34.611 53.504 76.288 53.504 121.293 0 187.699-150.374 210.688-343.501 210.688zM349.235 579.021c-36.762 0-66.56 41.318-66.56 92.109 0 50.893 29.798 92.211 66.56 92.211 36.813 0 66.611-41.318 66.611-92.211 0-50.79-29.798-92.109-66.611-92.109z"></path> </symbol> <symbol id="icon-gitlab" viewBox="0 0 500 500"> <title>gitlab</title> <path class="path1" d="M249.9,476.8L249.9,476.8l90.7-279.1H159.2L249.9,476.8L249.9,476.8zM32.1,197.7L32.1,197.7L4.5,282.5c-2.5,7.7,0.2,16.2,6.8,21l238.5,173.3L32.1,197.7L32.1,197.7zM32.1,197.7h127.1L104.6,29.6c-2.8-8.6-15-8.6-17.9,0L32.1,197.7L32.1,197.7zM467.6,197.7L467.6,197.7l27.6,84.8c2.5,7.7-0.2,16.2-6.8,21L249.9,476.8L467.6,197.7L467.6,197.7 zM467.6,197.7H340.5l54.6-168.1c2.8-8.6,15-8.6,17.9,0L467.6,197.7L467.6,197.7z" ></path> </symbol> <symbol id="icon-youtube" viewBox="0 0 1024 1024"> <title>youtube</title> <path class="path1" d="M512 117.76c-503.194 0-512 44.749-512 394.24s8.806 394.24 512 394.24 512-44.749 512-394.24-8.806-394.24-512-394.24zM676.096 529.101l-229.888 107.315c-20.122 9.318-36.608-1.126-36.608-23.347v-202.138c0-22.17 16.486-32.666 36.608-23.347l229.888 107.315c20.122 9.421 20.122 24.781 0 34.202z"></path> </symbol> <symbol id="icon-mail" viewBox="0 0 1024 1024"> <title>mail</title> <path class="path1" d="M80.589 270.643c24.986 13.414 371.098 199.373 384 206.285s29.594 10.189 46.387 10.189c16.794 0 33.485-3.277 46.387-10.189s359.014-192.87 384-206.285c25.037-13.466 48.691-65.843 2.765-65.843h-866.253c-45.926 0-22.272 52.378 2.714 65.843zM952.986 383.437c-28.416 14.797-378.214 197.069-395.622 206.182s-29.594 10.189-46.387 10.189-28.979-1.075-46.387-10.189-365.21-191.437-393.626-206.234c-19.968-10.445-19.763 1.792-19.763 11.213s0 373.402 0 373.402c0 21.504 28.979 51.2 51.2 51.2h819.2c22.221 0 51.2-29.696 51.2-51.2 0 0 0-363.93 0-373.35s0.205-21.658-19.814-11.213z"></path> </symbol> <symbol id="icon-spotify" viewBox="0 0 1024 1024"> <title>spotify</title> <path class="path1" d="M512 61.44c-248.883 0-450.56 201.626-450.56 450.56 0 248.781 201.677 450.56 450.56 450.56 248.934 0 450.509-201.728 450.509-450.56 0-248.883-201.523-450.56-450.509-450.56zM690.074 742.502c-8.858 0-15.053-3.379-21.555-7.322-60.877-36.915-136.294-56.269-218.010-56.269-41.677 0-86.682 4.966-133.632 14.592l-5.734 1.434c-5.939 1.434-12.032 3.021-16.691 3.021-18.995 0-33.843-14.746-33.843-33.587 0-19.098 10.752-32.614 28.774-35.994 56.115-12.8 108.954-19.046 161.382-19.046 94.976 0 179.866 22.016 252.467 65.485 12.442 7.27 20.275 15.667 20.275 34.202-0.051 18.483-15.002 33.485-33.434 33.485zM736.819 611.379c-10.598 0-17.562-4.045-23.706-7.629-109.722-65.075-273.050-86.682-407.603-50.842-2.253 0.666-4.301 1.28-6.144 1.894-5.069 1.587-9.779 3.174-16.435 3.174-22.118 0-40.090-18.074-40.090-40.346 0-21.453 11.213-36.454 31.437-42.189 51.866-14.234 100.557-23.654 170.65-23.654 113.254 0 223.078 28.416 309.146 79.923 15.667 8.96 22.784 21.197 22.784 39.475 0 22.221-17.971 40.192-40.038 40.192zM789.862 461.875c-9.984 0-16.128-2.406-25.344-7.373-74.394-44.646-190.464-71.219-310.733-71.219-62.669 0-119.603 6.912-169.267 20.326-1.69 0.41-3.277 0.87-5.018 1.382-5.274 1.587-11.878 3.482-18.688 3.482-26.419 0-47.053-20.89-47.053-47.565 0-23.194 13.005-40.909 34.816-47.36 59.955-17.715 128.973-26.675 205.107-26.675 137.114 0 267.571 30.464 357.939 83.507 16.998 9.677 25.344 24.32 25.344 44.646 0 26.266-20.685 46.848-47.104 46.848z"></path> </symbol> <symbol id="icon-lastfm" viewBox="0 0 315 315"> <title>lastfm</title> <path class="path1" d="M264.467 135.355c-2.688-0.92-5.289-1.773-7.787-2.594C236.855 126.26 230 123.449 230 112.41 c0-9.572 6.799-16.26 16.533-16.26c7.986 0 13.502 3.307 19.039 11.41c2.156 3.158 6.348 4.188 9.721 2.389l19.148-10.205 c1.762-0.938 3.076-2.541 3.652-4.453c0.576-1.91 0.367-3.973-0.582-5.729c-11.123-20.596-27.912-31.037-49.9-31.037 c-16.592 0-30.648 5.227-40.654 15.117c-9.918 9.803-15.16 23.453-15.16 39.471c0 33.607 21.297 47.508 58.063 60.156 c21.045 7.311 25.965 10.137 25.965 21.121c0 13.578-11.727 23.434-27.885 23.434c-0.486 0-0.98-0.008-1.48-0.025 c-17.377-0.607-22.725-9.088-30.789-28.297c-12.947-30.814-28.082-67.734-29.205-70.543c-0.012-0.031-0.025-0.064-0.037-0.096 c-16.416-39.535-49.057-62.209-89.555-62.209C43.457 56.654 0 101.9 0 157.518c0 55.598 43.457 100.828 96.873 100.828 c29.217 0 56.559-13.49 75.016-37.014c1.674-2.133 2.064-5.004 1.025-7.508l-11.541-27.781c-1.125-2.711-3.729-4.514-6.66-4.619 c-2.945-0.105-5.654 1.512-6.971 4.135c-9.977 19.9-29.469 32.262-50.869 32.262c-31.658 0-57.414-27.053-57.414-60.303 c0-33.26 25.756-60.32 57.414-60.32c23.029 0 44.1 14.273 52.432 35.516c0.023 0.055 0.045 0.111 0.068 0.166l28.574 67.982 l3.293 7.617c13.811 33.602 34.273 48.652 66.359 48.797h0.133c38.348 0 67.268-26.699 67.268-62.103 C315 159.674 295.66 145.965 264.467 135.355z"></path> </symbol> <symbol id="icon-instagram" viewBox="0 0 1024 1024"> <title>instagram</title> <path class="path1" d="M870.4 51.2h-716.8c-56.32 0-102.4 46.080-102.4 102.4v716.8c0 56.371 46.080 102.4 102.4 102.4h716.8c56.32 0 102.4-46.029 102.4-102.4v-716.8c0-56.32-46.080-102.4-102.4-102.4zM511.181 794.778c156.621 0 283.546-127.027 283.546-283.597 0-17.306-2.202-33.997-5.274-50.381h80.947v369.459c0 19.558-15.872 35.328-35.482 35.328h-645.837c-19.61 0-35.482-15.77-35.482-35.328v-369.459h79.309c-3.123 16.384-5.325 33.075-5.325 50.381 0 156.621 127.027 283.597 283.597 283.597zM333.978 511.181c0-97.894 79.36-177.203 177.254-177.203 97.843 0 177.254 79.309 177.254 177.203s-79.411 177.254-177.254 177.254c-97.946 0-177.254-79.36-177.254-177.254zM834.918 307.2h-82.688c-19.558 0-35.43-15.974-35.43-35.43v-82.79c0-19.558 15.872-35.379 35.379-35.379h82.688c19.661 0 35.533 15.821 35.533 35.379v82.739c0 19.507-15.872 35.482-35.482 35.482z"></path> </symbol> <symbol id="icon-linkedin" viewBox="0 0 1024 1024"> <title>linkedin</title> <path class="path1" d="M256 153.6c0 54.374-36.352 101.171-102.451 101.171-62.208 0-102.349-44.134-102.349-98.509 0-55.808 38.912-105.062 102.4-105.062s101.171 46.592 102.4 102.4zM51.2 972.8v-665.6h204.8v665.6h-204.8z"></path> <path class="path2" d="M358.4 534.733c0-79.104-2.611-145.203-5.222-202.291h184.013l9.114 88.218h3.891c25.907-41.523 89.395-102.4 195.686-102.4 129.638 0 226.918 86.784 226.918 273.51v381.030h-204.8v-351.283c0-81.613-31.078-143.872-102.4-143.872-54.374 0-81.613 44.032-95.898 80.333-5.222 13.005-6.502 31.13-6.502 49.306v365.517h-204.8v-438.067z"></path> </symbol> <symbol id="icon-google" viewBox="0 0 1024 1024"> <title>google</title> <path class="path1" d="M522.2 438.8v175.6h290.4c-11.8 75.4-87.8 220.8-290.4 220.8-174.8 0-317.4-144.8-317.4-323.2s142.6-323.2 317.4-323.2c99.4 0 166 42.4 204 79l139-133.8c-89.2-83.6-204.8-134-343-134-283 0-512 229-512 512s229 512 512 512c295.4 0 491.6-207.8 491.6-500.2 0-33.6-3.6-59.2-8-84.8l-483.6-0.2z"></path> </symbol> <symbol id="icon-google-plus" viewBox="0 0 1317 1024"> <title>google-plus</title> <path class="path1" d="M821.143 521.714q0 118.857-49.714 211.714t-141.714 145.143-210.857 52.286q-85.143 0-162.857-33.143t-133.714-89.143-89.143-133.714-33.143-162.857 33.143-162.857 89.143-133.714 133.714-89.143 162.857-33.143q163.429 0 280.571 109.714l-113.714 109.143q-66.857-64.571-166.857-64.571-70.286 0-130 35.429t-94.571 96.286-34.857 132.857 34.857 132.857 94.571 96.286 130 35.429q47.429 0 87.143-13.143t65.429-32.857 44.857-44.857 28-47.429 12.286-42.286h-237.714v-144h395.429q6.857 36 6.857 69.714zM1316.571 452v120h-119.429v119.429h-120v-119.429h-119.429v-120h119.429v-119.429h120v119.429h119.429z"></path> </symbol> <symbol id="icon-pinterest" viewBox="0 0 1024 1024"> <title>pinterest</title> <path class="path1" d="M512 68.4c-245 0-443.6 198.6-443.6 443.6 0 188 117 348.4 282 413-3.8-35-7.4-89 1.6-127.2 8-34.6 52-220.4 52-220.4s-13.2-26.6-13.2-65.8c0-61.6 35.8-107.8 80.2-107.8 37.8 0 56.2 28.4 56.2 62.4 0 38-24.2 95-36.8 147.6-10.6 44.2 22 80.2 65.6 80.2 78.8 0 139.4-83.2 139.4-203.2 0-106.2-76.4-180.4-185.2-180.4-126.2 0-200.2 94.6-200.2 192.6 0 38.2 14.6 79 33 101.2 3.6 4.4 4.2 8.2 3 12.8-3.4 14-10.8 44.2-12.4 50.4-2 8.2-6.4 9.8-14.8 6-55.4-25.8-90-106.8-90-171.8 0-140 101.6-268.4 293-268.4 153.8 0 273.4 109.6 273.4 256.2 0 152.8-96.4 276-230.2 276-45 0-87.2-23.4-101.6-51 0 0-22.2 84.6-27.6 105.4-10 38.6-37 86.8-55.2 116.2 41.6 12.8 85.6 19.8 131.4 19.8 245 0 443.6-198.6 443.6-443.6 0-245.2-198.6-443.8-443.6-443.8z"></path> </symbol> <symbol id="icon-medium" viewBox="0 0 179.2 179.2"> <title>medium</title> <path transform="scale(0.1,-0.1) translate(0,-1536)" d="M597 1115v-1173q0 -25 -12.5 -42.5t-36.5 -17.5q-17 0 -33 8l-465 233q-21 10 -35.5 33.5t-14.5 46.5v1140q0 20 10 34t29 14q14 0 44 -15l511 -256q3 -3 3 -5zM661 1014l534 -866l-534 266v600zM1792 996v-1054q0 -25 -14 -40.5t-38 -15.5t-47 13l-441 220zM1789 1116 q0 -3 -256.5 -419.5t-300.5 -487.5l-390 634l324 527q17 28 52 28q14 0 26 -6l541 -270q4 -2 4 -6z" /> </symbol> <symbol id="icon-vimeo" viewBox="0 0 21 21"> <title>vimeo</title> <path d="M17.811,2.018c2.017,0.053,3.026,1.198,3.036,3.438c0,0.147-0.005,0.3-0.013,0.457c-0.089,1.899-1.502,4.486-4.245,7.76 c-2.829,3.43-5.229,5.147-7.2,5.156c-1.226,0-2.244-1.05-3.061-3.151l-0.858-2.88L4.622,9.922C3.997,7.838,3.329,6.798,2.616,6.798 c-0.156,0-0.697,0.304-1.626,0.91L0,6.537l1.536-1.276l1.511-1.263C4.4,2.914,5.429,2.328,6.135,2.241 c0.094-0.01,0.188-0.013,0.284-0.013c1.449,0,2.354,1.041,2.709,3.124C9.326,6.54,9.49,7.506,9.623,8.248 C9.752,8.992,9.86,9.51,9.946,9.805c0.479,1.97,0.995,2.96,1.55,2.968c0.426,0,1.082-0.642,1.968-1.926 c0.866-1.319,1.332-2.296,1.392-2.932c0.019-0.129,0.026-0.25,0.026-0.362c0-0.861-0.474-1.29-1.418-1.29 c-0.479,0-0.99,0.102-1.537,0.299c0.98-3.021,2.864-4.534,5.65-4.544C17.655,2.018,17.732,2.018,17.811,2.018z"/> </symbol> <symbol id="icon-stackoverflow" viewBox="0 0 878 1024"> <title>stackoverflow</title> <path class="path1" d="M736.571 932.571h-638.857v-274.286h-91.429v365.714h821.714v-365.714h-91.429v274.286zM198.286 633.143l18.857-89.714 447.429 94.286-18.857 89.143zM257.143 419.429l38.286-83.429 414.286 193.714-38.286 82.857zM372 216l58.286-70.286 350.857 293.143-58.286 70.286zM598.857 0l272.571 366.286-73.143 54.857-272.571-366.286zM188.571 840.571v-90.857h457.143v90.857h-457.143z"></path> </symbol> <symbol id="icon-reddit" viewBox="0 0 1024 1024"> <title>reddit</title> <path class="path1" d="M1024 483.429q0 33.143-16.857 60.286t-45.429 41.429q6.857 26.286 6.857 54.857 0 88.571-60.857 164t-166 119.143-228.571 43.714-228.286-43.714-165.714-119.143-60.857-164q0-26.857 6.286-53.714-29.143-14.286-46.857-42t-17.714-60.857q0-46.857 33.143-80.286t80.571-33.429q48.571 0 82.857 36 124.571-86.857 294.286-92.571l66.286-297.714q1.714-7.429 8.571-12t14.857-2.857l210.857 46.286q10.286-21.143 30.857-34t45.143-12.857q35.429 0 60.571 24.857t25.143 60.286-25.143 60.571-60.571 25.143-60.286-24.857-24.857-60.286l-190.857-42.286-59.429 269.714q171.429 5.143 296.571 91.429 33.143-34.857 81.714-34.857 47.429 0 80.571 33.429t33.143 80.286zM238.857 597.143q0 35.429 24.857 60.571t60.286 25.143 60.571-25.143 25.143-60.571-25.143-60.286-60.571-24.857q-34.857 0-60 25.143t-25.143 60zM701.714 800q6.286-6.286 6.286-14.857t-6.286-14.857q-5.714-5.714-14.286-5.714t-14.857 5.714q-23.429 24-69.143 35.429t-91.429 11.429-91.429-11.429-69.143-35.429q-6.286-5.714-14.857-5.714t-14.286 5.714q-6.286 5.714-6.286 14.571t6.286 15.143q24.571 24.571 67.714 38.857t70 16.857 52 2.571 52-2.571 70-16.857 67.714-38.857zM700 682.857q35.429 0 60.286-25.143t24.857-60.571q0-34.857-25.143-60t-60-25.143q-35.429 0-60.571 24.857t-25.143 60.286 25.143 60.571 60.571 25.143z"></path> </symbol> <symbol id="icon-quora" viewBox="0 0 76 76"> <title>quora</title> <path class="path1" d="M67.9,59.1c0,0-0.4,5.3-5.2,5.3c-3.7,0-6.3-2.8-8.7-6.5c6.8-5.9,11.1-14.7,11.1-24.6C65.1,15.4,51.1,1,33.8,1 S2.6,15.4,2.6,33.2s14,32.2,31.3,32.2c3.1,0,6.2-0.5,9-1.4C46.5,69.8,51,75,58.2,75c14.6,0,15.2-15.9,15.2-15.9L67.9,59.1 L67.9,59.1z M33.8,60.2c-10.1,0-18.2-12.1-18.2-26.9S23.8,6.3,33.8,6.3s18.2,12.1,18.2,26.9c0,5.9-1.3,11.4-3.5,15.8 c-2.5-3.5-5.4-6.5-9.7-7.5c-7.5-1.7-14,1.7-16.1,3.4l1.9,4c0,0,2-1.1,6.8,0c3.1,0.7,5.4,4.9,8.1,9.8C37.9,59.7,35.9,60.2,33.8,60.2 z"></path> </symbol> <symbol id="icon-microphone" viewBox="-8 -4 34 37"> <title>quora</title> <path clip-rule="evenodd" d="M10.8,22.8V26h5v2h-5h-3h-5v-2h5v-3.2C3.4,22.2,0,18.7,0,14.4v-3 c0-0.1,0-0.3,0-0.4h2.8c0,0.3-0.1,0.6-0.1,0.9V14c0,3.3,2.9,6,6.5,6c3.6,0,6.5-2.7,6.5-6v-2.1c0-0.3,0-0.6-0.1-0.9h2.8 c0,0.1,0,0.3,0,0.4v3C18.6,18.7,15.2,22.2,10.8,22.8z M9.3,18c-2.5,0-4.5-2-4.5-4.5v-9C4.8,2,6.8,0,9.3,0s4.5,2,4.5,4.5v9 C13.8,16,11.8,18,9.3,18z" fill="#0D0D0D" fill-rule="evenodd"/> </symbol> </defs> </svg> </body> </html>
